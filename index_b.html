<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sage-Wise | Consultoría Empresarial</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --primary-color: #1a73e8;
            --secondary-color: #4285f4;
            --accent-color: #0d47a1;
            --light-color: #e8f0fe;
            --white-color: #ffffff;
            --dark-text: #202124;
            --light-text: #5f6368;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--white-color);
            color: var(--dark-text);
            line-height: 1.6;
        }
        
        header {
            background-color: var(--white-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .logo img {
            height: auto;
            width: 150px;
        }
        
        .logo h1 {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 600;
        }
        
        .nav-tabs {
            display: flex;
            list-style: none;
        }
        
        .nav-tabs li {
            margin-left: 2rem;
        }
        
        .nav-tabs a {
            text-decoration: none;
            color: var(--light-text);
            font-weight: 500;
            padding: 0.5rem 0;
            position: relative;
            transition: color 0.3s;
        }
        
        .nav-tabs a:hover {
            color: var(--primary-color);
        }
        
        .nav-tabs a.active {
            color: var(--primary-color);
        }
        
        .nav-tabs a.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 3px;
        }
        
        .content {
            margin-top: 100px;
            min-height: calc(100vh - 180px);
            padding: 2rem 5%;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Home Tab Styles */
        .intro-section {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .intro-text {
            flex: 1;
            min-width: 300px;
        }
        
        .intro-text h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 2.2rem;
        }
        
        .intro-text p {
            margin-bottom: 1rem;
            color: var(--light-text);
            font-size: 1.1rem;
        }
        
        .octagon-model {
            flex: 1;
            min-width: 300px;
            height: 450px;
            position: relative;
            background-color: var(--light-color);
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .octagon-title {
            text-align: center;
            padding: 1rem;
            color: var(--primary-color);
            font-weight: 600;
            font-size: 1.2rem;
            background-color: rgba(26, 115, 232, 0.1);
        }
        
        .octagon-canvas {
            flex: 1;
            cursor: grab;
        }
        
        .octagon-canvas:active {
            cursor: grabbing;
        }
        
        .section-title {
            color: var(--primary-color);
            margin: 2rem 0 1.5rem;
            font-size: 1.8rem;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60px;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 3px;
        }
        
        .success-cases {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        
        .octagon-info {
            background-color: var(--white-color);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            height: fit-content;
        }
        
        .octagon-info h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        
        .octagon-info p {
            color: var(--light-text);
            line-height: 1.6;
        }
        
        .octagon-info.default {
            display: block;
        }
        
        .octagon-info.selected {
            border: 2px solid var(--primary-color);
            box-shadow: 0 6px 20px rgba(26, 115, 232, 0.2);
        }
        
        .case-card {
            background-color: var(--white-color);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            padding: 1.2rem;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .case-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
        }
        
        .case-card h3 {
            color: var(--primary-color);
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
        }
        
        .case-card p {
            color: var(--light-text);
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .contact-section {
            background-color: var(--light-color);
            padding: 2rem;
            border-radius: 10px;
            margin: 3rem 0;
        }
        
        .contact-section h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        
        .contact-item i {
            font-size: 1.5rem;
            color: var(--primary-color);
            width: 35px;
            text-align: center;
        }
        
        .contact-info h3 {
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        
        .contact-info p {
            color: var(--light-text);
        }
        
        /* Quiz Tab Styles */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--white-color);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }
        
        .quiz-intro {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .quiz-intro h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .quiz-question {
            margin-bottom: 2rem;
            display: none;
        }
        
        .quiz-question.active {
            display: block;
        }
        
        .question-text {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            color: var(--dark-text);
        }
        
        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .answer-option {
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .answer-option:hover {
            background-color: var(--light-color);
            border-color: var(--primary-color);
        }
        
        .answer-option.selected {
            background-color: var(--light-color);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .quiz-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }
        
        .quiz-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .quiz-button:hover {
            background-color: var(--accent-color);
        }
        
        .quiz-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        .quiz-results {
            display: none;
            text-align: center;
        }
        
        .quiz-results h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }
        
        .results-summary {
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }
        
        /* Chat Tab Styles */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 70vh;
            max-width: 900px;
            margin: 0 auto;
            background-color: var(--white-color);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .chat-header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem;
            text-align: center;
        }
        
        .chat-messages {
            flex-grow: 1;
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .message {
            max-width: 80%;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 0.5rem;
        }
        
        .message-user {
            align-self: flex-end;
            background-color: var(--primary-color);
            color: white;
            border-bottom-right-radius: 0;
        }
        
        .message-bot {
            align-self: flex-start;
            background-color: var(--light-color);
            color: var(--dark-text);
            border-bottom-left-radius: 0;
        }
        
        .chat-input {
            display: flex;
            padding: 1rem;
            border-top: 1px solid #eee;
        }
        
        .chat-input input {
            flex-grow: 1;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px 0 0 5px;
            outline: none;
        }
        
        .chat-input button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
        }
        
        .chat-input button:hover {
            background-color: var(--accent-color);
        }
        
        /* Footer Styles */
        footer {
            background-color: var(--primary-color);
            color: white;
            padding: 2rem 5%;
        }
        
        .footer-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
        }
        
        .footer-logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .footer-logo img {
            height: auto;
            width: 150px;
            filter: brightness(0) invert(1);
        }
        
        .footer-logo h2 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .copyright {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                padding: 1rem;
            }
            
            .nav-tabs {
                margin-top: 1rem;
                width: 100%;
                justify-content: space-around;
            }
            
            .nav-tabs li {
                margin: 0;
            }
            
            .content {
                margin-top: 140px;
                padding: 1rem;
            }
            
            .success-cases {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .cases-grid {
                grid-template-columns: 1fr;
            }
            
            .octagon-model {
                height: 400px;
            }
            
            .intro-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <img src="https://www.sage-wise.net/pc/_img/Logo_Sage-Wise_Learning_Institute_50x150.png" alt="Sage-Wise Logo">
            </div>
            <ul class="nav-tabs">
                <li><a href="#home" class="tab-link active" data-tab="home">Inicio</a></li>
                <li><a href="#quiz" class="tab-link" data-tab="quiz">Diagnóstico</a></li>
                <li><a href="#chat" class="tab-link" data-tab="chat">El Explicador</a></li>
            </ul>
        </div>
    </header>
    
    <main class="content">
        <!-- Home Tab -->
        <div id="home" class="tab-content active">
            <section class="intro-section">
                <div class="intro-text">
                    <h2>Bienvenido a Sage-Wise</h2>
                    <p>Somos una consultora especializada en transformación empresarial que utiliza nuestro exclusivo modelo del octágono para diagnosticar y potenciar su organización.</p>
                    <p>Nuestro enfoque integra aspectos estratégicos, operativos y culturales para crear soluciones que generan resultados reales y sostenibles en el tiempo.</p>
                    <p>Con años de experiencia en múltiples sectores industriales, entendemos los desafíos únicos que enfrentan las empresas actuales y ofrecemos soluciones personalizadas que impulsan la competitividad y el crecimiento.</p>
                </div>
                <div class="octagon-model">
                    <div class="octagon-title">Modelo del Octagrama</div>
                    <div class="octagon-canvas" id="octagon-container">
                        <!-- 3D Octagon will be rendered here using Three.js -->
                    </div>
                </div>
            </section>
            
            <h2 class="section-title">Casos de Éxito</h2>
            <section class="success-cases">
                <div class="cases-grid">
                    <div class="case-card">
                        <h3>Empresa Tecnológica</h3>
                        <p>Implementamos nuestro modelo de diagnóstico en una empresa de software con 200 empleados, logrando un incremento del 35% en productividad en 8 meses.</p>
                    </div>
                    <div class="case-card">
                        <h3>Manufacturera Industrial</h3>
                        <p>Una empresa manufacturera optimizó su cadena de producción reduciendo costos en un 18% y mejorando la calidad del producto en un 25%.</p>
                    </div>
                    <div class="case-card">
                        <h3>Empresa de Servicios Financieros</h3>
                        <p>Una institución financiera aumentó su índice de satisfacción de clientes de 72% a 94% en un año tras implementar nuestro plan estratégico.</p>
                    </div>
                </div>
                <div class="octagon-info default" id="octagon-info">
                    <h3>Información del Modelo</h3>
                    <p>Haga clic en cualquier lado o vértice de los octágonos para ver información detallada sobre cada componente de nuestro modelo del Octagrama. Cada elemento está diseñado para trabajar de manera integrada con los demás, creando un sistema holístico de análisis organizacional.</p>
                </div>
            </section>
            
            <section class="contact-section">
                <h2>Contacto</h2>
                <div class="contact-grid">
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div class="contact-info">
                            <h3>Dirección</h3>
                            <p>Av. Insurgentes Sur 1602, Ciudad de México, México</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone-alt"></i>
                        <div class="contact-info">
                            <h3>Teléfono</h3>
                            <p>+52 (55) 1234-5678</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div class="contact-info">
                            <h3>Email</h3>
                            <p>contacto@sage-wise.com</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock"></i>
                        <div class="contact-info">
                            <h3>Horario</h3>
                            <p>Lunes a Viernes: 9:00 - 18:00</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- Quiz Tab -->
        <div id="quiz" class="tab-content">
            <div class="quiz-container">
                <div class="quiz-intro">
                    <h2>Diagnóstico Organizacional</h2>
                    <p>Complete este cuestionario para recibir una evaluación preliminar de su organización basada en nuestro modelo del octágono. Los resultados le ayudarán a identificar áreas de oportunidad para mejorar el desempeño de su empresa.</p>
                </div>
                
                <!-- Quiz content will be dynamically populated -->
                <div id="quiz-content">
                    <div class="quiz-question active" data-question="1">
                        <p class="question-text">Pregunta 1: ¿Placeholder para la primera pregunta del diagnóstico?</p>
                        <div class="answer-options">
                            <div class="answer-option" data-value="a">Opción A: Placeholder para respuesta</div>
                            <div class="answer-option" data-value="b">Opción B: Placeholder para respuesta</div>
                            <div class="answer-option" data-value="c">Opción C: Placeholder para respuesta</div>
                            <div class="answer-option" data-value="d">Opción D: Placeholder para respuesta</div>
                        </div>
                    </div>
                    
                    <!-- More questions will be added dynamically -->
                    
                    <div class="quiz-nav">
                        <button id="prev-btn" class="quiz-button" disabled>Anterior</button>
                        <button id="next-btn" class="quiz-button">Siguiente</button>
                    </div>
                </div>
                
                <div id="quiz-results" class="quiz-results">
                    <h2>Resultados de su Diagnóstico</h2>
                    <div class="results-summary">
                        <p>Basado en sus respuestas, hemos identificado las siguientes áreas de oportunidad en su organización:</p>
                    </div>
                    <div id="results-detail">
                        <!-- Results will be populated here -->
                    </div>
                    <button id="restart-btn" class="quiz-button">Realizar Diagnóstico Nuevamente</button>
                </div>
            </div>
        </div>
        
        <!-- Chat Tab -->
        <div id="chat" class="tab-content">
            <div class="chat-intro">
                <h2>El Explicador</h2>
                <p>Nuestro asistente virtual responderá sus consultas sobre metodologías de consultoría, transformación organizacional y nuestro modelo del octágono. El Explicador tiene acceso a nuestra base de conocimientos y puede proporcionar información detallada sobre cómo implementar mejoras en su organización.</p>
            </div>
            
            <div class="chat-container">
                <div class="chat-header">
                    <h3>El Explicador - Asistente Virtual</h3>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <div class="message message-bot">
                        ¡Hola! Soy El Explicador, tu asistente virtual. Puedes preguntarme sobre el modelo del octágono de Sage-Wise, métodos de consultoría o cualquier duda sobre transformación organizacional. ¿En qué puedo ayudarte hoy?
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="user-message" placeholder="Escribe tu pregunta aquí...">
                    <button id="send-message"><i class="fas fa-paper-plane"></i> Enviar</button>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="footer-container">
            <div class="footer-logo">
                <img src="https://www.sage-wise.net/pc/_img/Logo_Sage-Wise_Learning_Institute_50x150.png" alt="Sage-Wise Logo">
            </div>
            <div class="copyright">
                <p>© 2025 Sage-Wise. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>
    
    <script>
        // Tab Navigation
        document.addEventListener('DOMContentLoaded', function() {
            const tabLinks = document.querySelectorAll('.tab-link');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all tabs
                    tabLinks.forEach(tab => tab.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to selected tab
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // 3D Octagon Visualization
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            
            const container = document.getElementById('octagon-container');
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.offsetWidth, container.offsetHeight);
            renderer.setClearColor(0x000000, 0);
            container.appendChild(renderer.domElement);
            
            // Mouse controls
            let mouseDown = false;
            let mouseX = 0;
            let mouseY = 0;
            let targetRotationX = 0;
            let targetRotationY = 0;
            let currentRotationX = 0;
            let currentRotationY = 0;
            
            // Create octagon group
            const octagonGroup = new THREE.Group();
            scene.add(octagonGroup);
            
            // Octagon labels for vertices
            const vertexLabels = [
                "Vértice 1", "Vértice 2", "Vértice 3", "Vértice 4",
                "Vértice 5", "Vértice 6", "Vértice 7", "Vértice 8"
            ];
            
            // Side labels
            const sideLabels = [
                "Lado 1", "Lado 2", "Lado 3", "Lado 4",
                "Lado 5", "Lado 6", "Lado 7", "Lado 8"
            ];
            
            // Create two octagons
            const octagonGeometry = new THREE.CylinderGeometry(1.2, 1.2, 0.15, 8);
            const octagonMaterial1 = new THREE.MeshPhongMaterial({ 
                color: 0x1a73e8,
                transparent: true,
                opacity: 0.8,
                flatShading: true
            });
            const octagonMaterial2 = new THREE.MeshPhongMaterial({ 
                color: 0x4285f4,
                transparent: true,
                opacity: 0.8,
                flatShading: true
            });
            
            const octagon1 = new THREE.Mesh(octagonGeometry, octagonMaterial1);
            octagon1.position.y = 0.5;
            octagonGroup.add(octagon1);
            
            const octagon2 = new THREE.Mesh(octagonGeometry, octagonMaterial2);
            octagon2.position.y = -0.5;
            octagonGroup.add(octagon2);
            
            // Create text sprites for labels
            function createTextSprite(text, color = '#1a73e8') {
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                
                canvas.width = 256;
                canvas.height = 64;
                
                context.fillStyle = color;
                context.font = 'Bold 16px Arial';
                context.textAlign = 'center';
                context.textBaseline = 'middle';
                context.fillText(text, canvas.width / 2, canvas.height / 2);
                
                const texture = new THREE.CanvasTexture(canvas);
                const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
                const sprite = new THREE.Sprite(spriteMaterial);
                sprite.scale.set(0.8, 0.2, 1);
                
                return sprite;
            }
            
            // Add vertex labels for top octagon
            for (let i = 0; i < 8; i++) {
                const angle = (i / 8) * Math.PI * 2;
                const x = Math.cos(angle) * 1.6;
                const z = Math.sin(angle) * 1.6;
                
                const label = createTextSprite(vertexLabels[i]);
                label.position.set(x, 0.8, z);
                label.userData = { type: 'vertex', index: i, octagon: 1 };
                octagonGroup.add(label);
            }
            
            // Add vertex labels for bottom octagon
            for (let i = 0; i < 8; i++) {
                const angle = (i / 8) * Math.PI * 2;
                const x = Math.cos(angle) * 1.6;
                const z = Math.sin(angle) * 1.6;
                
                const label = createTextSprite(vertexLabels[i], '#4285f4');
                label.position.set(x, -0.8, z);
                label.userData = { type: 'vertex', index: i, octagon: 2 };
                octagonGroup.add(label);
            }
            
            // Add side labels for top octagon
            for (let i = 0; i < 8; i++) {
                const angle = (i / 8) * Math.PI * 2 + (Math.PI / 8);
                const x = Math.cos(angle) * 1.4;
                const z = Math.sin(angle) * 1.4;
                
                const label = createTextSprite(sideLabels[i]);
                label.position.set(x, 0.5, z);
                label.userData = { type: 'side', index: i, octagon: 1 };
                octagonGroup.add(label);
            }
            
            // Add side labels for bottom octagon
            for (let i = 0; i < 8; i++) {
                const angle = (i / 8) * Math.PI * 2 + (Math.PI / 8);
                const x = Math.cos(angle) * 1.4;
                const z = Math.sin(angle) * 1.4;
                
                const label = createTextSprite(sideLabels[i], '#4285f4');
                label.position.set(x, -0.5, z);
                label.userData = { type: 'side', index: i, octagon: 2 };
                octagonGroup.add(label);
            }
            
            // Add lights
            const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(1, 1, 1);
            scene.add(directionalLight);
            
            camera.position.set(0, 0, 4);
            
            // Mouse event handlers
            container.addEventListener('mousedown', onMouseDown, false);
            container.addEventListener('mousemove', onMouseMove, false);
            container.addEventListener('mouseup', onMouseUp, false);
            container.addEventListener('click', onMouseClick, false);
            
            function onMouseDown(event) {
                mouseDown = true;
                mouseX = event.clientX;
                mouseY = event.clientY;
            }
            
            function onMouseMove(event) {
                if (!mouseDown) return;
                
                const deltaX = event.clientX - mouseX;
                const deltaY = event.clientY - mouseY;
                
                targetRotationY += deltaX * 0.01;
                targetRotationX += deltaY * 0.01;
                
                mouseX = event.clientX;
                mouseY = event.clientY;
            }
            
            function onMouseUp(event) {
                mouseDown = false;
            }
            
            function onMouseClick(event) {
                const rect = container.getBoundingClientRect();
                const mouse = new THREE.Vector2();
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
                
                const raycaster = new THREE.Raycaster();
                raycaster.setFromCamera(mouse, camera);
                
                const intersects = raycaster.intersectObjects(octagonGroup.children, true);
                
                if (intersects.length > 0) {
                    const object = intersects[0].object;
                    if (object.userData && (object.userData.type === 'vertex' || object.userData.type === 'side')) {
                        showOctagonInfo(object.userData);
                    }
                }
            }
            
            function showOctagonInfo(userData) {
                const infoPanel = document.getElementById('octagon-info');
                infoPanel.classList.remove('default');
                infoPanel.classList.add('selected');
                
                let title = '';
                let description = '';
                
                if (userData.type === 'vertex') {
                    title = `${vertexLabels[userData.index]} - Octágono ${userData.octagon}`;
                    description = `Este vértice representa un punto de convergencia crítico en nuestro modelo. Los vértices son intersecciones donde múltiples elementos del sistema organizacional se encuentran y requieren especial atención para el análisis integral.`;
                } else if (userData.type === 'side') {
                    title = `${sideLabels[userData.index]} - Octágono ${userData.octagon}`;
                    description = `Este lado conecta elementos clave del modelo organizacional. Los lados representan las relaciones y flujos entre diferentes componentes del sistema, fundamentales para entender la dinámica empresarial.`;
                }
                
                infoPanel.innerHTML = `
                    <h3>${title}</h3>
                    <p>${description}</p>
                    <p style="margin-top: 1rem; font-style: italic; color: var(--light-text);">Haga clic en otros elementos para explorar más componentes del modelo.</p>
                `;
            }
            
            // Animation function
            function animate() {
                requestAnimationFrame(animate);
                
                // Smooth rotation
                currentRotationX += (targetRotationX - currentRotationX) * 0.05;
                currentRotationY += (targetRotationY - currentRotationY) * 0.05;
                
                octagonGroup.rotation.x = currentRotationX;
                octagonGroup.rotation.y = currentRotationY;
                
                // Auto-rotation when not being controlled
                if (!mouseDown) {
                    targetRotationY += 0.003;
                }
                
                renderer.render(scene, camera);
            }
            
            // Handle window resize
            function onWindowResize() {
                const width = container.offsetWidth;
                const height = container.offsetHeight;
                
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                renderer.setSize(width, height);
            }
            
            window.addEventListener('resize', onWindowResize);
            
            animate();
            
            // Quiz functionality (placeholder - will be replaced with actual questions)
            const quizQuestions = [
                {
                    text: "¿Su empresa tiene una estrategia claramente definida y comunicada a todos los niveles?",
                    options: [
                        { value: "a", text: "Sí, totalmente definida y comunicada efectivamente" },
                        { value: "b", text: "Parcialmente definida pero no comunicada efectivamente" },
                        { value: "c", text: "Definida pero no alineada con las operaciones diarias" },
                        { value: "d", text: "No tenemos una estrategia claramente definida" }
                    ]
                },
                {
                    text: "¿Cómo calificaría la estructura organizacional de su empresa?",
                    options: [
                        { value: "a", text: "Claramente definida y efectiva para nuestros objetivos" },
                        { value: "b", text: "Definida pero con algunas ineficiencias" },
                        { value: "c", text: "Demasiado rígida y limita la innovación" },
                        { value: "d", text: "Confusa o inexistente en algunos departamentos" }
                    ]
                },
                {
                    text: "¿Sus procesos y sistemas están documentados y optimizados?",
                    options: [
                        { value: "a", text: "Completamente documentados y optimizados" },
                        { value: "b", text: "Documentados pero no optimizados" },
                        { value: "c", text: "Parcialmente documentados" },
                        { value: "d", text: "Apenas documentados o inexistentes" }
                    ]
                }
                // More questions will be added here
            ];
            
            // Initialize quiz with first question
            let currentQuestion = 0;
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const quizContent = document.getElementById('quiz-content');
            const quizResults = document.getElementById('quiz-results');
            const restartBtn = document.getElementById('restart-btn');
            
            function loadQuizQuestions() {
                // Clear existing questions
                const questionsContainer = document.getElementById('quiz-content');
                while (questionsContainer.firstChild) {
                    questionsContainer.removeChild(questionsContainer.firstChild);
                }
                
                // Load questions dynamically
                quizQuestions.forEach((question, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'quiz-question';
                    questionDiv.dataset.question = index + 1;
                    if (index === 0) questionDiv.classList.add('active');
                    
                    const questionText = document.createElement('p');
                    questionText.className = 'question-text';
                    questionText.textContent = `Pregunta ${index + 1}: ${question.text}`;
                    questionDiv.appendChild(questionText);
                    
                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'answer-options';
                    
                    question.options.forEach(option => {
                        const optionDiv = document.createElement('div');
                        optionDiv.className = 'answer-option';
                        optionDiv.dataset.value = option.value;
                        optionDiv.textContent = option.text;
                        
                        optionDiv.addEventListener('click', function() {
                            // Remove selected class from all options in this question
                            optionsDiv.querySelectorAll('.answer-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            
                            // Add selected class to clicked option
                            this.classList.add('selected');
                            
                            // Enable next button if an option is selected
                            document.getElementById('next-btn').disabled = false;
                        });
                        
                        optionsDiv.appendChild(optionDiv);
                    });
                    
                    questionDiv.appendChild(optionsDiv);
                    questionsContainer.appendChild(questionDiv);
                });
                
                // Add navigation buttons
                const navDiv = document.createElement('div');
                navDiv.className = 'quiz-nav';
                
                const prevButton = document.createElement('button');
                prevButton.id = 'prev-btn';
                prevButton.className = 'quiz-button';
                prevButton.textContent = 'Anterior';
                prevButton.disabled = true;
                
                const nextButton = document.createElement('button');
                nextButton.id = 'next-btn';
                nextButton.className = 'quiz-button';
                nextButton.textContent = 'Siguiente';
                nextButton.disabled = true;
                
                navDiv.appendChild(prevButton);
                navDiv.appendChild(nextButton);
                questionsContainer.appendChild(navDiv);
                
                // Initialize event listeners for navigation
                initQuizNavigation();
            }
            
            function initQuizNavigation() {
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                let currentQuestion = 0;
                
                prevBtn.addEventListener('click', function() {
                    // Hide current question
                    document.querySelector(`.quiz-question[data-question="${currentQuestion + 1}"]`).classList.remove('active');
                    
                    // Show previous question
                    currentQuestion--;
                    document.querySelector(`.quiz-question[data-question="${currentQuestion + 1}"]`).classList.add('active');
                    
                    // Update buttons
                    nextBtn.textContent = 'Siguiente';
                    if (currentQuestion === 0) {
                        prevBtn.disabled = true;
                    }
                });
                
                nextBtn.addEventListener('click', function() {
                    // Hide current question
                    document.querySelector(`.quiz-question[data-question="${currentQuestion + 1}"]`).classList.remove('active');
                    
                    // Move to next question or show results
                    currentQuestion++;
                    
                    if (currentQuestion < quizQuestions.length) {
                        // Show next question
                        document.querySelector(`.quiz-question[data-question="${currentQuestion + 1}"]`).classList.add('active');
                        
                        // Enable/disable buttons as needed
                        prevBtn.disabled = false;
                        
                        // If it's the last question, change next button text
                        if (currentQuestion === quizQuestions.length - 1) {
                            nextBtn.textContent = 'Ver Resultados';
                        }
                        
                        // Check if an option is already selected for this question
                        const selectedOption = document.querySelector(`.quiz-question[data-question="${currentQuestion + 1}"] .answer-option.selected`);
                        nextBtn.disabled = !selectedOption;
                    } else {
                        // Show results
                        document.getElementById('quiz-content').style.display = 'none';
                        document.getElementById('quiz-results').style.display = 'block';
                        generateResults();
                    }
                });
                
                // Add click event to all answer options to enable the next button
                document.querySelectorAll('.answer-option').forEach(option => {
                    option.addEventListener('click', function() {
                        // Remove selected class from all options in this question
                        const questionDiv = this.closest('.quiz-question');
                        questionDiv.querySelectorAll('.answer-option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // Add selected class to clicked option
                        this.classList.add('selected');
                        
                        // Enable next button
                        nextBtn.disabled = false;
                    });
                });
                
                // Restart button
                document.getElementById('restart-btn').addEventListener('click', function() {
                    document.getElementById('quiz-results').style.display = 'none';
                    document.getElementById('quiz-content').style.display = 'block';
                    
                    // Reset to first question
                    document.querySelectorAll('.quiz-question').forEach(q => q.classList.remove('active'));
                    document.querySelector('.quiz-question[data-question="1"]').classList.add('active');
                    
                    // Clear selections
                    document.querySelectorAll('.answer-option').forEach(opt => opt.classList.remove('selected'));
                    
                    // Reset navigation
                    currentQuestion = 0;
                    prevBtn.disabled = true;
                    nextBtn.disabled = true;
                    nextBtn.textContent = 'Siguiente';
                });
            }
            
            function generateResults() {
                const resultsContainer = document.getElementById('results-detail');
                resultsContainer.innerHTML = '';
                
                // Collect selected answers
                const answers = [];
                document.querySelectorAll('.quiz-question').forEach(question => {
                    const selected = question.querySelector('.answer-option.selected');
                    if (selected) {
                        answers.push(selected.dataset.value);
                    }
                });
                
                // Generate fake analysis based on answers
                // In a real implementation, this would be based on actual analysis logic
                const areas = [
                    { name: 'Estrategia', score: Math.floor(Math.random() * 100) },
                    { name: 'Estructura', score: Math.floor(Math.random() * 100) },
                    { name: 'Sistemas', score: Math.floor(Math.random() * 100) },
                    { name: 'Personal', score: Math.floor(Math.random() * 100) },
                    { name: 'Habilidades', score: Math.floor(Math.random() * 100) },
                    { name: 'Estilos', score: Math.floor(Math.random() * 100) },
                    { name: 'Valores', score: Math.floor(Math.random() * 100) },
                    { name: 'Objetivos', score: Math.floor(Math.random() * 100) }
                ];
                
                // Sort areas by score (lowest first)
                areas.sort((a, b) => a.score - b.score);
                
                // Generate recommendations
                const recommendations = document.createElement('div');
                
                const topStrengthsTitle = document.createElement('h3');
                topStrengthsTitle.textContent = 'Fortalezas Principales';
                recommendations.appendChild(topStrengthsTitle);
                
                const strengthsList = document.createElement('ul');
                areas.slice(5).forEach(area => {
                    const item = document.createElement('li');
                    item.textContent = `${area.name}: ${area.score}% de efectividad`;
                    strengthsList.appendChild(item);
                });
                recommendations.appendChild(strengthsList);
                
                const areasToImproveTitle = document.createElement('h3');
                areasToImproveTitle.textContent = 'Áreas de Oportunidad';
                recommendations.appendChild(areasToImproveTitle);
                
                const improveList = document.createElement('ul');
                areas.slice(0, 3).forEach(area => {
                    const item = document.createElement('li');
                    item.textContent = `${area.name}: ${area.score}% de efectividad`;
                    improveList.appendChild(item);
                });
                recommendations.appendChild(improveList);
                
                const recommendationText = document.createElement('p');
                recommendationText.textContent = 'Basado en su diagnóstico, recomendamos enfocar sus esfuerzos de mejora en las áreas mencionadas arriba. Para una evaluación más detallada y un plan de acción personalizado, contáctenos y agendaremos una sesión de consultoría.';
                recommendations.appendChild(recommendationText);
                
                resultsContainer.appendChild(recommendations);
            }
            
            // Initialize quiz
            loadQuizQuestions();
            
            // Chat functionality
            const chatMessages = document.getElementById('chat-messages');
            const userInput = document.getElementById('user-message');
            const sendButton = document.getElementById('send-message');
            
            function addMessage(text, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message message-${isUser ? 'user' : 'bot'}`;
                messageDiv.textContent = text;
                chatMessages.appendChild(messageDiv);
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            function handleUserMessage() {
                const message = userInput.value.trim();
                if (message.length === 0) return;
                
                // Add user message
                addMessage(message, true);
                userInput.value = '';
                
                // Simulate bot response (this would be replaced with OpenAI API calls)
                setTimeout(() => {
                    // This is a placeholder - in the real implementation, 
                    // this would send the query to OpenAI API with content from documents
                    let botResponse = "Esta es una respuesta simulada. En la implementación real, se utilizará la API de OpenAI para generar respuestas basadas en los documentos proporcionados.";
                    
                    // Simple keyword matching for demo purposes
                    if (message.toLowerCase().includes("octágono") || message.toLowerCase().includes("octagon")) {
                        botResponse = "El modelo del octágono es nuestra metodología propietaria que analiza ocho dimensiones claves de una organización: Estrategia, Estructura, Sistemas, Personal, Habilidades, Estilos, Valores y Objetivos. Estas dimensiones están interconectadas y cualquier cambio en una afecta a las demás.";
                    } else if (message.toLowerCase().includes("consultoría")) {
                        botResponse = "Ofrecemos servicios de consultoría en transformación organizacional, mejora de procesos, gestión del cambio, desarrollo de liderazgo y estrategia corporativa. Cada proyecto se adapta a las necesidades específicas de nuestros clientes.";
                    } else if (message.toLowerCase().includes("contacto") || message.toLowerCase().includes("contratar")) {
                        botResponse = "Puede contactarnos a través de nuestro correo electrónico contacto@sage-wise.com o llamando al +52 (55) 1234-5678. Estaremos encantados de agendar una reunión inicial sin compromiso para discutir sus necesidades.";
                    }
                    
                    addMessage(botResponse);
                }, 1000);
            }
            
            sendButton.addEventListener('click', handleUserMessage);
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleUserMessage();
                }
            });
        });
        
        // This is where we would implement the OpenAI API integration
        // For now, this is a placeholder
        async function queryOpenAI(userQuery, documents) {
            // In the real implementation, this function would:
            // 1. Process the documents (Word files)
            // 2. Send the query along with relevant document content to OpenAI API
            // 3. Return the response
            
            // This would use the user's API key and appropriate OpenAI model
            
            return "Esta es una respuesta simulada. En la implementación real, se procesarían los documentos y se enviaría la consulta a la API de OpenAI.";
        }
    </script>
</body>
</html>
